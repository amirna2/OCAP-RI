<!-- Common properties/tasks that are shared by all projects

However, for possible overrides, these are all prefixed by
"_shared.common."

 -->
    
    
    <!-- Function _shared.common.subdocs:
        Create documents in the sub-packages.
         Arguments: arg-subdir - subdirectory containing the XML files to
            convert
      -->
    <target name="_shared.common.subdocs" >
        <mkdir dir="${dirs.deploy.docs}/${arg-subdir}" />
        <style
            basedir="${dirs.xdocs}/${arg-subdir}"
            destdir="${dirs.deploy.docs}/${arg-subdir}"
            force="yes"
            style="${_shared.xstyle.relative}"
            includes="*.xml"
            excludes="summary.xml"
        >
            <param name="projectname"
                expression="${product}" />
            <param name="projectversion"
                expression="${version}" />
            <classpath>
                <pathelement location="${libs.xalan.current}" />
            </classpath>
        </style>
    </target>
    
    <target name="_shared.common.docs.summary"
            depends="_shared.common.subdocs.summary,
                _shared.common.subdocs.summary.create">
        <!-- do the summary for the project -->
        <copy file="${dirs.xdocs}/summary.xml"
            tofile="${_shared.xstyle.dir.relative}/input-summary.xml"
            overwrite="true" />
        <style
            basedir="${_shared.xdoc.dir.tmp}"
            destdir="${_shared.xdoc.dir.tmp}"
            force="yes"
            style="${_shared.xdoc.summary-xsl.relative}"
            includes="summary.xml"
            extension="1.xml"
        >
            <param name="summaryxml"
                expression="" />
            <param name="projectname"
                expression="${product}" />
            <param name="projectversion"
                expression="${version}" />
            <classpath>
                <pathelement location="${libs.xalan.current}" />
            </classpath>
        </style>
        <copy file="${_shared.xstyle.dir.relative}/input-summary.xml"
            tofile="${_shared.xdoc.dir.tmp}/${project}-summary.xml"
            overwrite="true" />
        <delete file="${_shared.xstyle.dir.relative}/input-summary.xml" />
        <delete file="${_shared.xdoc.tmp-summary}" />
        <copy file="${_shared.xdoc.dir.tmp}/summary1.xml"
            tofile="${_shared.xdoc.tmp-summary}"
            overwrite="true" />
        <delete file="${_shared.xdoc.dir.tmp}/summary1.xml" />
    </target>
    
    
    <!-- create the full summary.xml file only if it doesn't already exist -->
    <target name="_shared.common.subdocs.summary" >
        <mkdir dir="${_shared.xdoc.dir.tmp}" />
        <available property="_shared.common.subdocs.summary.xml"
            type="file" file="${_shared.xdoc.tmp-summary}" />
    </target>
    <target name="_shared.common.subdocs.summary.create"
            depends="_shared.common.subdocs.summary.create.1" />
    <target name="_shared.common.subdocs.summary.create.1"
        unless="_shared.common.subdocs.summary.xml">
        <echo file="${_shared.xdoc.tmp-summary}" >&lt;?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?&gt;
&lt;!--
***********************************************************************
This file is automatically generated.
Do not edit.
***********************************************************************
--&gt;
&lt;set&gt;
<!-- must include every known category -->
<!--    &lt;type name="Build" /&gt; -->
    &lt;type name="Testing" /&gt;
    &lt;type name="Utility" /&gt;
&lt;/set&gt;
        </echo>
    </target>
    
    
    
    
    <!-- JavaDoc
        This will include for links the latest in every 3rd party library,
        for robustness.
        -->
    <target name="_shared.common.java-doc.latest"
            depends="_shared.common.docs.summary" >
        <delete dir="${dirs.deploy.api-docs}" failonerror="no" />
        <mkdir dir="${dirs.deploy.api-docs}" />
        <!-- only generate javadoc for the core source, never the tests -->
        <javadoc sourcepath="${dirs.sources.dev}"
            destdir="${dirs.deploy.api-docs}"
            Version="true"
            Use="true"
            Author="true"
            Windowtitle="${product}"
            Doctitle="${product} API"
            bottom="&lt;i&gt;Written under the LGPL&lt;/i&gt;"
            serialwarn="true"
        >
            <packageset dir="${dirs.sources.dev}">
                <exclude name="**/doc-files/**" />
                <exclude name="**/CVS/**" />
            </packageset>
            
            <classpath>
                <pathelement location="${dirs.classes.dev}" />
                <path refid="classpath.base" />
                <path refid="classpath.bootstrap" />
            </classpath>
            
            <!-- Customize: set the libraries for links here -->
            &inc.javadoc.ant.1_5;
            &inc.javadoc.bcel.5_0;
            &inc.javadoc.easymock.0_8;
            &inc.javadoc.jdk.1_4;
            &inc.javadoc.junit.3_8_1;
            &inc.javadoc.log4j.1_2_5;
            &inc.javadoc.mockobjects.0_4rc1;
            &inc.javadoc.sax.2_0_1;
            &inc.javadoc.xalan.2_3_1;
            &inc.javadoc.xerces.2_0_2;
            &inc.javadoc.xml4j.2_0_4;
        </javadoc>
    </target>
    

